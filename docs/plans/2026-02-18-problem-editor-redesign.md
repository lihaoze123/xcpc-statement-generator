# 题目编辑器重构设计方案

## 概述

彻底重构题目编辑器，从 Monaco Editor 切换到 CodeMirror，采用标签页式导航，提供更大的编辑区域。

## 背景

当前题目编辑器存在以下问题：
1. Monaco Editor 代码块太小，各字段垂直排列
2. 编辑体验拥挤，空间利用不足
3. 需要更好的内容组织方式

## 设计方案

### 布局结构

```
┌─────────────────────────────────────────────────────────────┐
│  [题目名称]                           [格式 ▼]  [删除]     │
├─────────────────────────────────────────────────────────────┤
│  [描述] [输入] [输出] [提示] [样例]                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                                                             │
│                    大型编辑器区域                           │
│                    (CodeMirror)                            │
│                                                             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 核心改动

#### 1. 标签页导航
- 5 个标签页：描述 / 输入 / 输出 / 提示 / 样例
- 当前激活的标签页显示完整编辑器
- 标签栏固定在顶部

#### 2. CodeMirror 编辑器
- 替换 Monaco Editor
- 使用 `@codemirror/state` 和 `@codemirror/view`
- 适配语言：markdown / latex / typst
- 通用配置：行号、软换行、字号调整

#### 3. 样例管理
- 样例作为单独的标签页
- 支持添加/删除多个样例
- 每个样例有输入/输出两个编辑框

#### 4. 预览区联动
- 预览可见时：编辑器 + 预览并排
- 预览隐藏时：编辑器自动扩展

### 组件设计

```
EditorArea
├── ProblemHeader (题目名称 + 格式选择 + 删除)
├── TabBar (标签页导航)
└── EditorPanel
    ├── DescriptionEditor
    ├── InputFormatEditor
    ├── OutputFormatEditor
    ├── NotesEditor
    └── SamplesEditor
        ├── SampleItem[]
        └── AddSampleButton
```

### 状态管理

使用 `use-immer` 更新题目数据：
- `updateProblem(field, value)` - 更新单个字段
- `updateSample(index, field, value)` - 更新样例数据

### 样式设计

- 标签栏：紧凑型 tab 样式，当前 tab 有下划线高亮
- 编辑器：全屏化处理，最大化利用空间
- 间距：整体 padding 16px，标签间 gap 8px

## 验收标准

1. ✅ 编辑器区域显著增大
2. ✅ 标签页切换流畅
3. ✅ CodeMirror 正常工作
4. ✅ 预览隐藏时编辑器自动扩展
5. ✅ 样例管理功能完整
